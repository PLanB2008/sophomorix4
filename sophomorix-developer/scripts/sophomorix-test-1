#!/usr/bin/perl -w
# This script (sophomorix-test) is maintained by Rüdiger Beck
# It is Free Software (License GPLv3)
# If you find errors, contact the author
# jeffbeck@web.de  or  jeffbeck@linuxmuster.net

# Bibliotheken
use strict;
use Getopt::Long;
Getopt::Long::Configure ("bundling");
use Sophomorix::SophomorixBase qw(
                                 print_line
                                 print_title
                                 check_options
                                 );
use Sophomorix::SophomorixSambaAD qw(
                                 AD_bind_admin
                                 AD_unbind_admin
                                 AD_get_base
                                    );
use Sophomorix::SophomorixTest qw(
                                 AD_test_object_exist
                                 );

$Conf::log_level=1;

my $ldap = &AD_bind_admin();



&AD_test_object_exist({ldap=>$ldap,
                   dn=>"CN=koehleju7,CN=attic,CN=Students,OU=LEUNA,DC=linuxmuster,DC=local",
                   #####
                   displayName=>"Jürgen Köhler",
                   givenName=>"Jürgen",
                   name=>"koehleju7",
                   sAMAccountname=>"koehleju7",
                   sn=>"Köhler",
                   sophomorixAdminClass => "pks-7a",
                   sophomorixFirstPassword => "Muster!",
                   sophomorixFirstnameASCII => "Juergen",
                   sophomorixSurnameASCII  => "Koehler",
                   sophomorixRole => "student",
                   sophomorixSchoolPrefix => "pks",
                   sophomorixSchoolname => "PKS",
                  });



&AD_unbind_admin($ldap);



